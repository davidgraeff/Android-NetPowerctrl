apply plugin: 'com.android.application'

android {
    compileSdkVersion 20
    buildToolsVersion '20'

//    productFlavors {
//        //noinspection GroovyMissingReturnStatement
//        vanilla {
//
//        }
//    }

    def appID = "oly.netpowerctrl"

    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 20
        versionCode 84
        versionName "5.8"
        applicationId appID
        testApplicationId "oly.netpowerctrl.tests"
        testInstrumentationRunner "android.test.InstrumentationTestRunner"
        resConfig "de"
    }

    lintOptions {
        abortOnError false
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_7
        targetCompatibility JavaVersion.VERSION_1_7
    }

    def getRevision = { ->
        def stdout = new ByteArrayOutputStream()
        exec {
            commandLine 'git', 'rev-parse', '--short', 'HEAD'
            standardOutput = stdout
        }
        return stdout.toString().trim()
    }

    buildTypes {
        release {
            zipAlign true
            runProguard true
            resValue "string", "authority", appID + ".utils.AssetDocumentProvider"
            //buildConfigField "String", "AUTHORITY", appID + ".utils.AssetDocumentProvider"
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.txt'
            debuggable false
        }
        debug {
            versionNameSuffix "-" + getRevision()
            applicationIdSuffix ".debug"
            resValue "string", "authority", appID + ".utils.AssetDocumentProvider.Debug"
            //buildConfigField "String", "AUTHORITY", appID + ".utils.AssetDocumentProvider.Debug"
            zipAlign true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
            runProguard false
        }
    }
    sourceSets { main { java.srcDirs = ['src/main/java', 'src/tests/java'] } }

    aaptOptions {
        //noCompress 'txt'
        ignoreAssetsPattern "!.svn:!.git:!.ds_store:!*.scc:.*:<dir>_*:!CVS:!thumbs.db:!picasa.ini:!*~"
    }
}

dependencies {
    compile project(':libraries:Donations')
    //compile fileTree(dir: 'libs', include: ['*.jar']) :5.2.08 5.0.89
    //compile 'com.google.android.gms:play-services:5.2.08'
    compile 'com.github.gabrielemariotti.changeloglib:library:1.5.1'
    compile 'ch.acra:acra:4.5.0'
    compile 'com.android.support:support-v13:20.0.0'
    androidTestCompile 'junit:junit:4.11'
}