apply plugin: 'com.android.application'

android {
    compileSdkVersion 21
    buildToolsVersion "21.0.1"

//    productFlavors {
//        //noinspection GroovyMissingReturnStatement
//        vanilla {
//
//        }
//    }

    def appID = "oly.netpowerctrl"

    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 21
        versionCode 96
        versionName "6.3"
        applicationId appID
        testApplicationId "oly.netpowerctrl.tests"
        testInstrumentationRunner "android.test.InstrumentationTestRunner"
        resConfig "de"
    }

    lintOptions {
        abortOnError false
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_7
        targetCompatibility JavaVersion.VERSION_1_7
    }

    def getRevision = { ->
        def stdout = new ByteArrayOutputStream()
        exec {
            commandLine 'git', 'rev-parse', '--short', 'HEAD'
            standardOutput = stdout
        }
        return stdout.toString().trim()
    }

    buildTypes {
        release {
            zipAlign true
            runProguard true
            resValue "string", "authority", appID + ".utils.AssetDocumentProvider"
            //buildConfigField "String", "AUTHORITY", appID + ".utils.AssetDocumentProvider"
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.txt'
            debuggable false
        }
        debug {
            versionNameSuffix "-" + getRevision()
            applicationIdSuffix ".debug"
            resValue "string", "authority", appID + ".utils.AssetDocumentProvider.Debug"
            //buildConfigField "String", "AUTHORITY", appID + ".utils.AssetDocumentProvider.Debug"
            zipAlign true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
            runProguard false
        }
    }

    splits {
        density {
            enable true
            //exclude "ldpi", "tvdpi", "xxxhdpi"
            //compatibleScreens 'small', 'normal', 'large', 'xlarge'
        }
    }

    sourceSets { main { java.srcDirs = ['src/main/java', 'src/tests/java'] } }

    aaptOptions {
        //noCompress 'txt'
        ignoreAssetsPattern "!.svn:!.git:!.ds_store:!*.scc:.*:<dir>_*:!CVS:!thumbs.db:!picasa.ini:!*~"
    }
}

dependencies {
    compile project(':libraries:Donations')
    //compile fileTree(dir: 'libs', include: ['*.jar']) :5.2.08 5.0.89
    //compile 'com.google.android.gms:play-services:5.2.08'
    compile 'com.github.gabrielemariotti.changeloglib:library:1.5.1'
    compile 'ch.acra:acra:4.5.0'
    compile 'com.android.support:support-v13:21.0.0'
    compile 'com.android.support:recyclerview-v7:21.0.0'
    compile 'com.android.support:cardview-v7:21.0.0'
    //noinspection GradleDependency
    compile 'com.android.support:appcompat-v7:21.0.0'
    compile 'net.lingala.zip4j:zip4j:1.3.2'
    compile 'com.google.code.ndef-tools-for-android:ndeftools:1.2.4'
    compile 'com.google.code.ndef-tools-for-android:ndeftools-util:1.2.4'

    //compile 'org.lucasr.twowayview:core:1.0.0-SNAPSHOT@aar'
    //compile 'org.lucasr.twowayview:layouts:1.0.0-SNAPSHOT@aar'
    androidTestCompile 'junit:junit:4.11'
}